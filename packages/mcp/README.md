# @watchlyhq/mcp ‚Äî MCP Tools for Axiom

TypeScript library of MCP tools and utilities for Axiom observability. It registers tools onto an MCP server (Node or Workers) and exports helpers for queries, monitors, formatting, and result building.

## Install

```bash
npm install @watchlyhq/mcp
```

## Quick Start

Register the tools on an existing MCP server instance:

```ts
import { registerAxiomMcpTools } from '@watchlyhq/mcp';
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';

const server = new McpServer({ name: 'Axiom MCP', version: '0.0.1' });

registerAxiomMcpTools({
  server,
  accessToken: '<axiom-token>',
  apiUrl: 'https://api.axiom.co',
  internalUrl: 'https://app.axiom.co',
  integrations: [],        // optional list like ['otel-...']
  logger: console,         // any object with debug/info/warn/error
  orgId: '<axiom-org-id>',
});
```

## Key Exports

- Tools: `registerAxiomMcpTools`
- API helpers: `getDatasets`, `getDatasetFields`, `runQuery`, `getSavedQueries`, `getMonitors`, `getMonitorsHistory`, `getDashboards`, `getDashboard`, `Client`, `apiFetch`, `ApiError`
- Results/formatting: `result`, `Builder`, `formatQueryResults` and related formatters
- Types: API request/response types and shared `schema`
- OTel tooling is exported under `otel/*` but currently optional/experimental

## Scripts

From the repo root:

```bash
npm run build -w packages/mcp       # builds (runs metadata extract + tsc)
npm test -w packages/mcp            # unit tests (vitest)
npm run test:watch -w packages/mcp
npm run type-check -w packages/mcp
```

Tool metadata is generated by `scripts/extract-tools.ts` during `build` and written to `packages/mcp/metadata.*`.

## Notes

- Designed for strict TypeScript (ES2021/2022). Named exports preferred.
- Works in server contexts that can host an MCP server (e.g., Cloudflare Worker via `apps/mcp`).

## üìù License

This project is licensed under the MIT License - see the LICENSE file for details.
